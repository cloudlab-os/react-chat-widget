import { Component } from 'react';

import { Widget, addResponseMessage, setQuickButtons, toggleMsgLoader, addLinkSnippet, toggleWidget, toggleInputDisabled } from '../index';
import { addUserMessage } from '..';

export default class App extends Component {
  componentDidMount() {
    addResponseMessage('Welcome to this awesome chat!');
    addLinkSnippet({ link: 'https://google.com', title: 'Google' });
    // addResponseMessage('![](https://raw.githubusercontent.com/Wolox/press-kit/master/logos/logo_banner.png)');
    // addResponseMessage('![vertical](https://d2sofvawe08yqg.cloudfront.net/reintroducing-react/hero2x?1556470143)');
    setQuickButtons([ { label: '停止回答', value: '停止回答', style: 'red' }, { label: '其他按钮', value: '其他按钮' }]);
    toggleWidget();
    // toggleInputDisabled()
  }

  handleNewUserMessage = (newMessage: any) => {
    toggleMsgLoader();
    setTimeout(() => {
      toggleMsgLoader();
      if (newMessage === 'fruits') {
        setQuickButtons([ { label: 'Apple', value: 'apple' }, { label: 'Orange', value: 'orange' }, { label: 'Pear', value: 'pear' }, { label: 'Banana', value: 'banana' } ]);
      } else {
        addResponseMessage(newMessage);
      }
    }, 2000);
  }

  handleQuickButtonClicked = (e: any) => {
    addResponseMessage('Selected ' + e);
    setQuickButtons([]);
  }

  handleSubmit = (msgText: string) => {
    if(msgText.length < 80) {
      addUserMessage("Uh oh, please write a bit more.");
      return false;
    }
    return true;
  }

  render() {
    return (
      <Widget
        title="云燕智能助理"
        senderPlaceHolder="请选择"
        handleNewUserMessage={this.handleNewUserMessage}
        handleQuickButtonClicked={this.handleQuickButtonClicked}
        imagePreview
        handleSubmit={this.handleSubmit}
        emojis
        fullScreenMode={true}
        showCloseButton={false}
        titleAvatar="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2RfNTE0M18zODUyKSI+CiAgICAgICAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00MS42NDczIDEwLjk3NjFDNDIuMDMyIDEwLjYxNTEgNDIuMjQxMSAxMC4xMTAxIDQyLjI0MTEgOS41ODI0N0M0Mi4yNDExIDcuODgzNCA0MC4xOTY1IDYuOTA5NjkgMzguODEwNiA3Ljg5MjZDMzYuOTI2NCA5LjIyODkgMzQuNDgyNSAxMC43Nzk0IDMyLjA0NzEgMTEuODA0NUMzMC42MTY3IDExLjU0MiAyOS4wODQ1IDExLjQwNDEgMjcuNDUyMyAxMS40MDUySDI3LjQ1MzFDMjUuNzU5NyAxMS40MDY0IDI0LjE3MTQgMTEuNTQyNCAyMi42OTA3IDExLjgwMzVDMjAuMjU2MSAxMC43Nzg0IDE3LjgxMzIgOS4yMjg0NSAxNS45Mjk2IDcuODkyNkMxNC41NDM3IDYuOTA5NjkgMTIuNDk5MSA3Ljg4MzQgMTIuNDk5MSA5LjU4MjQ3QzEyLjQ5OTEgMTAuMTEwMSAxMi43MDgyIDEwLjYxNTEgMTMuMDkzIDEwLjk3NjFDMTMuNzc1NCAxMS42MTY0IDE0Ljk5ODMgMTIuNzI0NyAxNi41MTIxIDEzLjkyNjRDMTEuNjE1OCAxNi42NDU2IDguODAyODMgMjEuNDA1NiA4LjI4OTQ0IDI3LjQyMTZDNi44MDA2MSA0NC44Nzg2IDQ3Ljk2NTEgNDQuODQwNCA0Ni40NDg4IDI3LjQyMTZDNDUuOTU1MSAyMS43NDg4IDQzLjEzNDEgMTYuODIyNiAzOC4xNTc5IDEzLjk4MkMzOS43MDQgMTIuNzU5IDQwLjk1NDQgMTEuNjI2MyA0MS42NDczIDEwLjk3NjFaIiBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXJfNTE0M18zODUyKSIvPgogICAgPC9nPgogICAgPHBhdGggZD0iTTIwLjgyNjMgMjEuMzM5OUMyMS4zNzc0IDIxLjMzOTkgMjEuOTA2IDIxLjU1ODggMjIuMjk1OCAyMS45NDg2QzIyLjY4NTUgMjIuMzM4MyAyMi45MDQ1IDIyLjg2NjkgMjIuOTA0NSAyMy40MTgxVjI3LjU3NDVDMjIuOTA0NSAyOC4xMjU3IDIyLjY4NTUgMjguNjU0MyAyMi4yOTU4IDI5LjA0NEMyMS45MDYgMjkuNDMzOCAyMS4zNzc0IDI5LjY1MjcgMjAuODI2MyAyOS42NTI3QzIwLjI3NTEgMjkuNjUyNyAxOS43NDY1IDI5LjQzMzggMTkuMzU2NyAyOS4wNDRDMTguOTY3IDI4LjY1NDMgMTguNzQ4IDI4LjEyNTcgMTguNzQ4IDI3LjU3NDVWMjMuNDE4MUMxOC43NDggMjIuODY2OSAxOC45NjcgMjIuMzM4MyAxOS4zNTY3IDIxLjk0ODZDMTkuNzQ2NSAyMS41NTg4IDIwLjI3NTEgMjEuMzM5OSAyMC44MjYzIDIxLjMzOTlaTTM1LjAyNDYgMjEuNDA5N0MzNS4zODM3IDIxLjY2MjggMzUuNjM0MSAyMi4wNDIgMzUuNzI1OSAyMi40NzE2QzM1LjgxNzggMjIuOTAxMSAzNS43NDQzIDIzLjM0OTUgMzUuNTIwMSAyMy43MjczTDM1LjQ0NTMgMjMuODQyTDM0LjQ1NTIgMjUuMjQ2MUwzNS40OTQzIDI2Ljg5MTJDMzUuNzI5MSAyNy4yNjI1IDM1LjgxNTMgMjcuNzA4NyAzNS43MzU3IDI4LjE0MDhDMzUuNjU2IDI4LjU3MjggMzUuNDE2MyAyOC45NTkgMzUuMDY0NSAyOS4yMjIxTDM0Ljk1MTUgMjkuMjk5NEMzNC41ODAxIDI5LjUzNDIgMzQuMTMzOCAyOS42MjAyIDMzLjcwMTcgMjkuNTQwNEMzMy4yNjk3IDI5LjQ2MDYgMzIuODgzNiAyOS4yMjA4IDMyLjYyMDYgMjguODY4OEwzMi41NDMyIDI4Ljc1NjZMMzAuODgwNyAyNi4xMjczQzMwLjcwODkgMjUuODU1NiAzMC42MTU0IDI1LjU0MTggMzAuNjEwNiAyNS4yMjA0QzMwLjYwNTcgMjQuODk5MSAzMC42ODk3IDI0LjU4MjYgMzAuODUzMiAyNC4zMDU5TDMwLjkyOTcgMjQuMTg3OUwzMi41OTIzIDIxLjgzMDNDMzIuODU5MSAyMS40NTIxIDMzLjI2NTIgMjEuMTk1MiAzMy43MjE0IDIxLjExNjRDMzQuMTc3NSAyMS4wMzc1IDM0LjY0NjMgMjEuMTQzIDM1LjAyNDYgMjEuNDA5N1oiIGZpbGw9IndoaXRlIi8+CiAgICA8ZGVmcz4KICAgICAgICA8ZmlsdGVyIGlkPSJmaWx0ZXIwX2RfNTE0M18zODUyIiB4PSIwLjI1IiB5PSIxLjUiIHdpZHRoPSI1NC4yMzkzIiBoZWlnaHQ9IjQ5IiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CiAgICAgICAgICAgIDxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgogICAgICAgICAgICA8ZmVPZmZzZXQgZHk9IjIiLz4KICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iNCIvPgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW4yPSJoYXJkQWxwaGEiIG9wZXJhdG9yPSJvdXQiLz4KICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC41IDAgMCAwIDAgMC44NjY2NjcgMCAwIDAgMCAxIDAgMCAwIDAuOCAwIi8+CiAgICAgICAgICAgIDxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzUxNDNfMzg1MiIvPgogICAgICAgICAgICA8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDFfZHJvcFNoYWRvd181MTQzXzM4NTIiIHJlc3VsdD0ic2hhcGUiLz4KICAgICAgICA8L2ZpbHRlcj4KICAgICAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfNTE0M18zODUyIiB4MT0iMTMuMjY1MyIgeTE9IjEyLjMwNjIiIHgyPSI0MS40NzUxIiB5Mj0iMTIuMzA2MiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjMTY3N0ZGIi8+CiAgICAgICAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzE2RUNGRiIvPgogICAgICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8L2RlZnM+Cjwvc3ZnPg=="
        profileAvatar="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTIiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl81MTQ0XzU3MjApIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTguMTAzIDYuNTczMzlDMTguMjYzMyA2LjQyMjk3IDE4LjM1MDUgNi4yMTI1NCAxOC4zNTA1IDUuOTkyNjlDMTguMzUwNSA1LjI4NDc1IDE3LjQ5ODUgNC44NzkwNCAxNi45MjExIDUuMjg4NThDMTYuMTM2IDUuODQ1MzcgMTUuMTE3NyA2LjQ5MTQzIDE0LjEwMyA2LjkxODUzQzEzLjUwNyA2LjgwOTE3IDEyLjg2ODUgNi43NTE3MSAxMi4xODg0IDYuNzUyMTVIMTIuMTg4OEMxMS40ODMyIDYuNzUyNjUgMTAuODIxNCA2LjgwOTMzIDEwLjIwNDUgNi45MTgxMUM5LjE5MDA1IDYuNDkxIDguMTcyMTcgNS44NDUxOSA3LjM4NzM1IDUuMjg4NThDNi44MDk4OSA0Ljg3OTA0IDUuOTU3OTcgNS4yODQ3NSA1Ljk1Nzk3IDUuOTkyNjlDNS45NTc5NyA2LjIxMjU0IDYuMDQ1MDkgNi40MjI5NyA2LjIwNTQxIDYuNTczMzlDNi40ODk3MyA2Ljg0MDE2IDYuOTk5MzEgNy4zMDE5NiA3LjYzMDA0IDcuODAyNjVDNS41ODk5IDguOTM1NjggNC40MTc4NSAxMC45MTkgNC4yMDM5MyAxMy40MjU3QzMuNTgzNTkgMjAuNjk5NCAyMC43MzU1IDIwLjY4MzUgMjAuMTAzNyAxMy40MjU3QzE5Ljg5NzkgMTEuMDYyIDE4LjcyMjUgOS4wMDk0NCAxNi42NDkxIDcuODI1ODVDMTcuMjkzNCA3LjMxNjI1IDE3LjgxNDMgNi44NDQyOCAxOC4xMDMgNi41NzMzOVoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik05LjQyODQyIDEwLjg5MTZDOS42NTgwOCAxMC44OTE2IDkuODc4MzMgMTAuOTgyOCAxMC4wNDA3IDExLjE0NTJDMTAuMjAzMSAxMS4zMDc2IDEwLjI5NDMgMTEuNTI3OSAxMC4yOTQzIDExLjc1NzVWMTMuNDg5NEMxMC4yOTQzIDEzLjcxOSAxMC4yMDMxIDEzLjkzOTMgMTAuMDQwNyAxNC4xMDE3QzkuODc4MzMgMTQuMjY0MSA5LjY1ODA4IDE0LjM1NTMgOS40Mjg0MiAxNC4zNTUzQzkuMTk4NzcgMTQuMzU1MyA4Ljk3ODUyIDE0LjI2NDEgOC44MTYxMiAxNC4xMDE3QzguNjUzNzMgMTMuOTM5MyA4LjU2MjUgMTMuNzE5IDguNTYyNSAxMy40ODk0VjExLjc1NzVDOC41NjI1IDExLjUyNzkgOC42NTM3MyAxMS4zMDc2IDguODE2MTIgMTEuMTQ1MkM4Ljk3ODUyIDEwLjk4MjggOS4xOTg3NyAxMC44OTE2IDkuNDI4NDIgMTAuODkxNlpNMTUuMzQ0NCAxMC45MjA3QzE1LjQ5NCAxMS4wMjYyIDE1LjU5ODQgMTEuMTg0MiAxNS42MzY2IDExLjM2MzFDMTUuNjc0OSAxMS41NDIxIDE1LjY0NDMgMTEuNzI5IDE1LjU1MDkgMTEuODg2NEwxNS41MTk3IDExLjkzNDJMMTUuMTA3MiAxMi41MTkyTDE1LjU0MDEgMTMuMjA0N0MxNS42MzggMTMuMzU5NCAxNS42NzM5IDEzLjU0NTMgMTUuNjQwNyAxMy43MjUzQzE1LjYwNzUgMTMuOTA1NCAxNS41MDc2IDE0LjA2NjIgMTUuMzYxIDE0LjE3NTlMMTUuMzEzOSAxNC4yMDgxQzE1LjE1OTIgMTQuMzA1OSAxNC45NzMyIDE0LjM0MTggMTQuNzkzMiAxNC4zMDg1QzE0LjYxMzIgMTQuMjc1MiAxNC40NTIzIDE0LjE3NTMgMTQuMzQyNyAxNC4wMjg3TDE0LjMxMDUgMTMuOTgxOUwxMy42MTc4IDEyLjg4NjRDMTMuNTQ2MiAxMi43NzMyIDEzLjUwNzIgMTIuNjQyNCAxMy41MDUyIDEyLjUwODVDMTMuNTAzMiAxMi4zNzQ2IDEzLjUzODIgMTIuMjQyNyAxMy42MDYzIDEyLjEyNzVMMTMuNjM4MiAxMi4wNzgzTDE0LjMzMDkgMTEuMDk2QzE0LjQ0MjEgMTAuOTM4NCAxNC42MTEzIDEwLjgzMTMgMTQuODAxNCAxMC43OTg1QzE0Ljk5MTQgMTAuNzY1NiAxNS4xODY4IDEwLjgwOTYgMTUuMzQ0NCAxMC45MjA3WiIgZmlsbD0idXJsKCNwYWludDFfbGluZWFyXzUxNDRfNTcyMCkiLz4KPGRlZnM+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhcl81MTQ0XzU3MjAiIHgxPSIzLjE0NzY5IiB5MT0iMy40OTU0IiB4Mj0iMjAuODUyNyIgeTI9IjMuNDk1NCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjMTY3N0ZGIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzE2RUNGRiIvPgo8L2xpbmVhckdyYWRpZW50Pgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MV9saW5lYXJfNTE0NF81NzIwIiB4MT0iOS40OTI0MSIgeTE9IjExLjMwNzQiIHgyPSIxNC43MjI5IiB5Mj0iMTEuMzA3NCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjMTY3N0ZGIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzE2RUNGRiIvPgo8L2xpbmVhckdyYWRpZW50Pgo8L2RlZnM+Cjwvc3ZnPgo="
        profileClientAvatar="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNzMxMDQ3MjgxOTUwIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjE2MDgiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxwYXRoIGQ9Ik01MTIgODUuMzMzMzMzYTM2Mi42NjY2NjcgMzYyLjY2NjY2NyAwIDAgMSAzNjIuNjY2NjY3IDM2Mi42NjY2NjdjMCAyNzcuMzMzMzMzLTIzNC42NjY2NjcgNTEyLTM2Mi42NjY2NjcgNTEycy0zNjIuNjY2NjY3LTIzNC42NjY2NjctMzYyLjY2NjY2Ny01MTJBMzYyLjY2NjY2NyAzNjIuNjY2NjY3IDAgMCAxIDUxMiA4NS4zMzMzMzN6IG0yMzQuNjY2NjY3IDQyNi42NjY2NjdhMTkyIDE5MiAwIDAgMC0xOTAuOTMzMzM0IDIxMi4yNjY2NjcgMTkyIDE5MiAwIDAgMCAyMTEuMi0yMTEuMkExOTQuMjE4NjY3IDE5NC4yMTg2NjcgMCAwIDAgNzQ2LjY2NjY2NyA1MTJ6IG0tNDY5LjMzMzMzNCAwYy02LjgyNjY2NyAwLTEzLjYxMDY2NyAwLjM0MTMzMy0yMC4yNjY2NjYgMS4wNjY2NjdhMTkyIDE5MiAwIDAgMCAyMTEuMiAyMTEuMkExOTIgMTkyIDAgMCAwIDI3Ny4zMzMzMzMgNTEyeiIgcC1pZD0iMTYwOSIgZmlsbD0iIzJjMmMyYyI+PC9wYXRoPjwvc3ZnPg=="
      />
    );
  }
}
